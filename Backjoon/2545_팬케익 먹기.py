# ìˆ˜í•™
# ê·¸ë¦¬ë”” ì•Œê³ ë¦¬ì¦˜


# ë¬¸ì œ: https://www.acmicpc.net/problem/2545

# 1ì  -> 3ì  ì—…ê·¸ë ˆì´ë“œ ì„±ê³µ í•˜í•˜í•˜
# ë©”ëª¨ë¦¬: 32412KB / ì‹œê°„: 32ms
from sys import stdin


input = stdin.readline

def main():
    T = int(input())

    for _ in range(T):
        input()
        # ğŸ—ï¸ A, B, Cê°€ í‰ë“±í•˜ê²Œë” ì˜ë¼ë‚˜ê°€ì•¼ í•¨
        A, B, C, D = map(int, input().split())
        size = [A, B, C]
        size.sort()
        A, B, C = size

        gap = [C-B, B-A, A]

        # ë§Œì•½ ì œì¼ í° ìˆ˜ - ë‘ë²ˆì§¸ë¡œ í° ìˆ˜ì˜ ì°¨ì´ê°€ Dë³´ë‹¤ í¬ë‹¤ë©´, ì œì¼ í° ìˆ˜ Cë¥¼ ì¡°ì •í•˜ëŠ” ê²ƒ ë§Œìœ¼ë¡œë„ Dë²ˆì„ ì±„ìš¸ ìˆ˜ ìˆë‹¤ëŠ”ê²ƒ.
        if gap[0] >= D:
            C -= D
        # ì•„ë‹ˆë¼ë©´ Bê¹Œì§€ ê³ ë ¤í•´ë´„
        else:
            # ì¼ë‹¨ Cë¥¼ B í¬ê¸°ë§Œí¼ ìë¥¸ë‹¤.
            C = B
            D -= gap[0]

            # ë§Œì•½ C-A, B-Aì˜ ì°¨ì´ê°€ Dë³´ë‹¤ í¬ë‹¤ë©´, ë‘ ìˆ˜ B, Cë§Œ ì¡°ì •í•´ì„œ Dë²ˆì„ ì±„ìš¸ ìˆ˜ ìˆìŒ.
            if gap[1] * 2 >= D:
                # ìµœëŒ€í•œ ê· ë“±í•˜ê²Œ ë§Œë“¤ì–´ì¤˜ì•¼í•¨.
                # ex) [1, 3, 3]ì´ê³  Dê°€ 1ì¸ ìƒí™©ì´ë¼ë©´? tmpëŠ” 2*2 - 1 = 3ì´ ë  ê²ƒì„.
                # tmp = 1ì´ ë˜ë¯€ë¡œ [1, 2, 2]ê°€ ë§Œë“¤ì–´ì§. ì•„ì§€ë§Œ tmp % 2 == 1ì´ë‹ˆ [1, 2, 3]ìœ¼ë¡œ ìˆ˜ì •.
                tmp = (gap[1] * 2 - D) // 2
                C = A + tmp
                B = A + tmp

                if (gap[1] * 2 - D) % 2 != 0:
                    C += 1
            # ì•„ë‹ˆë¼ë©´ ë§ˆì§€ë§‰ Aê¹Œì§€ ì¡°ì •í•´ì•¼í•¨. í—ˆê±±ìŠ¨~
            else:
                # C, Bë¥¼ A í¬ê¸°ë§Œí¼ ìë¦„
                C = B = A
                D -= gap[1] * 2

                # A, B, C í¬ê¸° ì¡°ì •
                if gap[2] * 3 >= D:
                    # B ì¡°ì •í• ë•Œì™€ ê°™ìŒ. ìµœëŒ€í•œ ê· ë“±í•˜ê²Œ.
                    tmp = (gap[2] * 3 - D) // 3
                    C = B = A = tmp

                    # ğŸš¨ 3ìœ¼ë¡œ ë‚˜ëˆ„ëŠ”ê²ƒì´ë¯€ë¡œ ë‚˜ë¨¸ì§€ê°€ 2ê°€ ë  ìˆ˜ë„ ìˆìŒ. ê³ ë ¤í•´ì•¼í•¨.
                    rest = (gap[2] * 3 - D) % 3
                    if rest == 1:
                        C += 1
                    if rest == 2:
                        C += 1
                        B += 1


        print(A * B * C)


main()