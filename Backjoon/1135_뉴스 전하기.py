# ê·¸ë¦¬ë”” ì•Œê³ ë¦¬ì¦˜
# ë‹¤ì´ë‚˜ë¯¹ í”„ë¡œê·¸ë˜ë°
# ê¹Šì´ ìš°ì„  íƒìƒ‰ (DFS)


# ë¬¸ì œ: https://www.acmicpc.net/problem/1135

# ê° ìƒì‚¬ëŠ” ìì‹ ì˜ ì§ì† ë¶€í•˜ë“¤ì—ê²Œ í•œ ëª…ì”© ì „í™”ë¥¼ ê±¸ì–´ ë‰´ìŠ¤ë¥¼ ì „ë‹¬í•¨.
# í†µí™” ì‹œê°„ì€ 1ë¶„, ë™ì‹œì— ì—¬ëŸ¬ëª…ì—ê²Œ ì „í™”ë¥¼ ëŒë¦´ìˆ˜ëŠ” ì—†ë‹¤.
# ë¶€í•˜ë“¤ë„ ë‰´ìŠ¤ë¥¼ ë°›ì€ ì§í›„ ìì‹ ì˜ ë¶€í•˜ë“¤ì—ê²Œ ì „ë‹¬í•˜ê¸° ì‹œì‘.
# => ë”¸ë¦° ë¶€í•˜ë“¤ì´ ê°€ì¥ ë§ì€ ì§ì† ë¶€í•˜ì—ê²Œ ë¨¼ì € ì „ë‹¬í•´ì•¼ ìœ ë¦¬í•¨.
# => ë”°ë¼ì„œ ì§ì†ë¶€í•˜ê°€ ê·¸ ë¶€í•˜ë“¤ì—ê²Œ ì „ë‹¬í•˜ëŠ” ì‹œê°„ë“¤ì„ êµ¬í•˜ê³  ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬.
# => ì •ë ¬ëœ ê¸°ì¤€ìœ¼ë¡œ í†µí™”ì‹œê°„ (1 + a) + (ì§ì†ë¶€í•˜ê°€ ë¶€í•˜ë“¤ì—ê²Œ ì „ë‹¬í•˜ëŠ” ì‹œê°„)ì„ êµ¬í•œë‹¤.
# => ì˜ˆë¥¼ë“¤ì–´ [4, 7, 5]ë¼ë©´, (1 + 7), (2 + 5), (3 + 4) ì¤‘ ê°€ì¥ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‹œê°„ì„ êµ¬í•¨.
# => ì´ ê°’ì´ ìƒì‚¬ê°€ ì§ì† ë¶€í•˜ì—ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ ì¤‘ ìµœì†Œê°’ì´ ëœë‹¤.

# ğŸš¨ ì°¸ê³ ë¡œ íŠ¸ë¦¬ í˜•ì‹ì´ë‹¤. ìƒì‚¬ or ë¶€í•˜ê°€ ê²¹ì¹˜ëŠ” ê²½ìš° X!


# 1. DFS ì¬ê·€ë¡œ í’€ì´
# ë©”ëª¨ë¦¬: 32412KB / ì‹œê°„: 44ms
from sys import stdin


input = stdin.readline

def main():
    N = int(input())
    graph = [[] for _ in range(N)]
    
    for i, boss in enumerate(map(int, input().split())):
        if i == 0:
            continue
        graph[boss].append(i)
    
    """
    ë§Œì•½ ë¶€í•˜ê°€ 3ëª…ì´ ìˆê³  ë¶€í•˜ì˜ ë¶€í•˜ë“¤ì—ê²Œ ì „í•˜ëŠ”ë°ì— ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ë‹¤ìŒê³¼ ê°™ë‹¤ê³  ì¹˜ì.
    ë¶€í•˜1: 5ë¶„ / ë¶€í•˜2: 1ë¶„ / ë¶€í•˜3: 0ë¶„(ë¶€í•˜ X)
    3 -> 2 -> 1 ìˆœì„œë¡œ ì „í•˜ê²Œ ë˜ë©´ ì´ë ‡ê²Œ ëœë‹¤.
    ex) xë²ˆ: xë²ˆ ë³¸ì¸ì´ ì „ë‹¬ë°›ëŠ”ë°ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ + xë²ˆì˜ ë¶€í•˜ë“¤ì—ê²Œ ì „ë‹¬í•˜ëŠ” ì‹œê°„
    - 3ë²ˆ: 1 + 0 = 1ë¶„
    - 2ë²ˆ: 2 + 1 = 3ë¶„
    - 1ë²ˆ: 3 + 5 = 8ë¶„
    => ìµœì¢…ì ìœ¼ë¡œ ê±¸ë¦¬ëŠ” ì‹œê°„ì€ 8ë¶„

    1 -> 2 -> 3 ìˆœì„œë¡œ ì „í•˜ë©´?
    - 1ë²ˆ: 1 + 5 = 6ë¶„
    - 2ë²ˆ: 2 + 1 = 3ë¶„
    - 3ë²ˆ: 3 + 0 = 3ë¶„
    => ìµœì¢…ì ìœ¼ë¡œ ê±¸ë¦¬ëŠ” ì‹œê°„ì€ 6ë¶„

    ë”°ë¼ì„œ ë”¸ë¦° ìì‹ì´ ê°€ì¥ ë§ì€ ë¶€í•˜ì—ê²Œ ì œì¼ ë¨¼ì € ì „ë‹¬í•´ì¤˜ì•¼í•œë‹¤.
    """

    def dfs(node):
        # ë¶€í•˜ë“¤ì˜ ì¼ì²˜ë¦¬ ì‹œê°„
        times = []

        for child in graph[node]:
            times.append(dfs(child))
        
        times.sort(reverse=True)
        max_time = 0

        # i: í•´ë‹¹ ë¶€í•˜ì—ê²Œ ì „ë‹¬í•˜ëŠ”ë°ê¹Œì§€ì˜ ì‹œê°„
        # time: í•´ë‹¹ ë¶€í•˜ê°€ ìì‹ ì˜ ë¶€í•˜ë“¤ì—ê²Œ ì „ë‹¬í•˜ëŠ” ì‹œê°„
        for i, time in enumerate(times, start=1):
            max_time = max(max_time, i + time)
        return max_time
    
    print(dfs(0))


main()


# 2. ì¬ê·€ ì—†ì´ ìŠ¤íƒë§Œ ì‚¬ìš©í•˜ê¸°
# ë©”ëª¨ë¦¬: 32412KB / ì‹œê°„: 44ms
from sys import stdin


input = stdin.readline

def main():
    N = int(input())
    graph = [[] for _ in range(N)]

    for i, boss in enumerate(map(int, input().split())):
        if i == 0:
            continue
        graph[boss].append(i)
    
    # ğŸ—ï¸ stack1 ê³¼ì •ì„ í†µí•´ stack2ì— ë¶€ëª¨-ìì‹ ìˆœì„œë¡œ ì €ì¥ë˜ê²Œë” ì²˜ë¦¬í•œë‹¤.
    stack1 = [0]
    stack2 = []

    while stack1:
        curr = stack1.pop()

        stack2.append(curr)
        for nxt in graph[curr]:
            stack1.append(nxt)
    
    # dp[x]: xë²ˆ ì§ì›ì´ ë‰´ìŠ¤ë¥¼ ë“¤ì€ í›„, ìì‹ ì˜ ëª¨ë“  ì§ì† ë¶€í•˜ë“¤ì—ê²Œ ë‰´ìŠ¤ë¥¼ ì „íŒŒí•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ìµœì†Œ ì‹œê°„
    dp = [0] * N

    while stack2:
        curr = stack2.pop()

        times = []
        for child in graph[curr]:
            times.append(dp[child])
        
        # ì˜¤ë˜ ê±¸ë¦¬ëŠ” ìì‹ë¶€í„° ì²˜ë¦¬
        times.sort(reverse=True)

        max_time = 0
        for i, time in enumerate(times, start=1):
            max_time = max(i + time, max_time)
        
        dp[curr] = max_time
    
    print(dp[0])


main()